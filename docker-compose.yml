version: "3.7"

services:
    server:
        build: "./server"
        command: python manage.py runserver 0.0.0.0:8000
        volumes:
            - ./server/:/usr/src/server/
        ports:
            - 8000:8000
        env_file:
            - ./server/.env.dev
    main:
        build: "./main"
        command: python -m main
        depends_on:
            - server
        devices:
            - "/dev/i2c-1:/dev/i2c-1"
    # db:
    #     image: postgres:12.0-alpine
    #     volumes:
    #         - postgres_data:/var/lib/postgresql/data/
    #     ports:
    #         - 5432:5432
    #     environment:
    #         - POSTGRES_USER=hello_django
    #         - POSTGRES_PASSWORD=hello_django
    #         - POSTGRES_DB=hello_django_dev

volumes:
    postgres_data: